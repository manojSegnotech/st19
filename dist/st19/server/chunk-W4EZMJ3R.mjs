import './polyfills.server.mjs';
import{a as re,b as ae,c as Ee,d as Ue}from"./chunk-MP4M5RCQ.mjs";import{A as xe,B as ye,F as he,G as Ce,J as be,M as Se,R as we,S as ke,T as Ie,U as Fe,c as oe,d as Pe,fa as Te,g as se,ga as Ve,i as me,j as ce,l as pe,n as de,o as ue,t as _e,v as fe,x as ve,y as ge}from"./chunk-W22YS3HU.mjs";import{j as Y,k as ee,l as te,o as ie,r as ne,s as le}from"./chunk-DHGLT5RG.mjs";import{$a as O,$b as m,Ac as G,Gb as s,Kb as R,Qb as n,Rb as r,Sb as v,Tb as V,Ub as U,Wb as g,Za as N,Zb as f,_a as y,cc as h,dc as F,eb as a,fb as x,jd as Z,la as u,lc as W,ma as _,mc as c,md as J,na as E,nc as C,nd as K,oa as j,oc as b,qc as $,rb as L,rc as B,rd as Q,sc as z,ub as q,uc as A,wd as X,xb as d,xc as S,yc as I}from"./chunk-HZOBEVAF.mjs";import{f as Re}from"./chunk-S6KH3LOX.mjs";var H=Re(Pe(),1);var T=class t{constructor(i){this.sanitizer=i}transform(i){return this.sanitizer.bypassSecurityTrustResourceUrl(i)}static \u0275fac=function(e){return new(e||t)(x(te,16))};static \u0275pipe=q({name:"safePipe",type:t,pure:!0})};var Le=()=>["mp4","webm","ogg"];function Be(t,i){t&1&&(n(0,"div",14)(1,"div",15)(2,"h1",16),c(3,"Welcome to Our Feeds"),r(),n(4,"p",17),c(5,"Get ready for interesting posts and updates. Stay tuned for fun and informative content!"),r()()())}function ze(t,i){t&1&&(n(0,"div",18)(1,"div",19)(2,"h1",17),c(3,"Welcome to Our Feeds"),r(),n(4,"p",17),c(5,"Get ready for interesting posts and updates. Stay tuned for fun and informative content!"),r()()())}function Ae(t,i){t&1&&v(0,"app-skeleton",20),t&2&&s("items",2)("layout",12)}function He(t,i){if(t&1){let e=g();n(0,"mat-card",21)(1,"div",22)(2,"div",23),v(3,"img",24),r(),n(4,"div",25)(5,"div",26),f("click",function(){u(e);let l=m();return _(l.feedPost("add"))}),n(6,"span"),c(7),r()()()(),n(8,"div",27)(9,"div",28),f("click",function(){u(e);let l=m();return _(l.feedPost("add"))}),n(10,"mat-icon"),c(11,"photo_library"),r(),n(12,"span",29),c(13,"Photo/Video"),r()()()()}if(t&2){let e=m();a(3),s("src",e.loginUser==null?null:e.loginUser.image,y),a(4),b("What's on your mind, ",e.loginUser!=null&&e.loginUser.display?(e.loginUser==null?null:e.loginUser.display)+"?":(e.loginUser==null?null:e.loginUser.username)+"?","")}}function Ne(t,i){t&1&&(n(0,"div",30),v(1,"img",31),n(2,"h2"),c(3," No Feeds Found..."),r()())}function Oe(t,i){if(t&1&&v(0,"img",61),t&2){let e=m().$implicit;s("routerLink","/company/"+(e==null||e.companies==null?null:e.companies.slug))("src",e==null||e.companies==null?null:e.companies.logo,y)}}function qe(t,i){if(t&1&&v(0,"img",62),t&2){let e=m().$implicit;s("routerLink","/professional/"+(e==null||e.authors==null?null:e.authors.username))("src",e==null||e.authors==null?null:e.authors.image,y)}}function We(t,i){if(t&1&&(n(0,"div",63),c(1),r()),t&2){let e=m().$implicit;s("routerLink","/company/"+(e==null||e.companies==null?null:e.companies.slug)),a(),b(" ",e.companies.name," ")}}function Ge(t,i){if(t&1&&(n(0,"div",63),c(1),S(2,"titlecase"),r()),t&2){let e=m().$implicit;s("routerLink","/professional/"+(e==null||e.authors==null?null:e.authors.username)),a(),b(" ",I(2,2,e.authors.display)," ")}}function Ze(t,i){if(t&1&&(n(0,"div",64)(1,"button",65)(2,"mat-icon"),c(3,"more_horiz"),r()()()),t&2){m();let e=W(14);a(),s("matMenuTriggerFor",e)}}function Je(t,i){if(t&1){let e=g();n(0,"button",66),f("click",function(){u(e);let l=m().$implicit,p=m();return _(p.feedPost(l))}),n(1,"mat-icon"),c(2,"edit"),r(),n(3,"span"),c(4,"Edit"),r()()}}function Ke(t,i){if(t&1){let e=g();n(0,"button",66),f("click",function(){u(e);let l=m(),p=l.$implicit,w=l.index,k=m();return _(k.deleteDialog(p,w))}),n(1,"mat-icon"),c(2,"delete"),r(),n(3,"span"),c(4,"Delete"),r()()}}function Qe(t,i){if(t&1&&(n(0,"div",67),v(1,"div",68),S(2,"slice"),r()),t&2){let e=m().$implicit;a(),h("matTooltip",e.content),s("matTooltipPosition","left")("innerHtml",e.content.length>400?G(2,3,e.content,0,400)+"....":e.content,N)}}function Xe(t,i){if(t&1&&(n(0,"div",69),v(1,"img",70),r()),t&2){let e=m().$implicit;a(),h("alt",e.authors.username),s("src",e.file,y)}}function Ye(t,i){if(t&1&&(n(0,"video",75),v(1,"source",76),S(2,"safePipe"),r()),t&2){let e=m(3).$implicit;a(),s("src",I(2,1,e.file),y)}}function et(t,i){if(t&1&&(v(0,"embed",77),S(1,"safePipe")),t&2){let e=m(3).$implicit;s("src",I(1,1,e.file),O)}}function tt(t,i){if(t&1&&(n(0,"div",72),d(1,Ye,3,3,"video",73)(2,et,2,3,"embed",74),r()),t&2){let e=m(2).$implicit;a(),s("ngIf",A(2,Le).includes(e.file.split(".").pop().toLowerCase())),a(),s("ngIf",!A(3,Le).includes(e.file.split(".").pop().toLowerCase()))}}function it(t,i){if(t&1&&(n(0,"div"),d(1,tt,3,4,"div",71),r()),t&2){let e=m().$implicit;a(),s("ngIf",e.file)}}function nt(t,i){t&1&&(E(),n(0,"svg",86),v(1,"path",87),r())}function lt(t,i){t&1&&(n(0,"mat-icon",88),c(1,"thumb_up"),r())}function ot(t,i){if(t&1){let e=g();n(0,"div",78)(1,"div",79),f("click",function(){u(e);let l=m().$implicit,p=m();return _(p.likePost(l))}),d(2,nt,2,0,"svg",80)(3,lt,2,0,"mat-icon",81),n(4,"span",82),c(5),r()(),n(6,"div",83),E(),n(7,"svg",84),v(8,"path",85),r(),j(),n(9,"span",82),c(10),r()()()}if(t&2){let e=m().$implicit,o=m();a(2),s("ngIf",!(e.likes!=null&&e.likes.includes(o.loginUser==null?null:o.loginUser.id))),a(),s("ngIf",e.likes==null?null:e.likes.includes(o.loginUser==null?null:o.loginUser.id)),a(2),b("",(e==null||e.likes==null?null:e.likes.length)>0?e==null||e.likes==null?null:e.likes.length:""," Like"),a(),F("routerLink","/app/feeds/",e.slug,""),a(4),b("",(e==null||e.comments==null?null:e.comments.length)>0?e==null||e.comments==null?null:e.comments.length:""," Comment")}}function rt(t,i){t&1&&(E(),n(0,"svg",86),v(1,"path",87),r())}function at(t,i){t&1&&(n(0,"mat-icon",88),c(1,"thumb_up"),r())}function st(t,i){if(t&1){let e=g();n(0,"div",78)(1,"div",79),f("click",function(){u(e);let l=m(2);return _(l.loginForm())}),d(2,rt,2,0,"svg",80)(3,at,2,0,"mat-icon",81),n(4,"span",82),c(5),r()(),n(6,"div",89),f("click",function(){u(e);let l=m(2);return _(l.loginForm())}),E(),n(7,"svg",84),v(8,"path",85),r(),j(),n(9,"span",82),c(10),r()()()}if(t&2){let e=m().$implicit,o=m();a(2),s("ngIf",!(e.likes!=null&&e.likes.includes(o.loginUser==null?null:o.loginUser.id))),a(),s("ngIf",e.likes==null?null:e.likes.includes(o.loginUser==null?null:o.loginUser.id)),a(2),b("",(e==null||e.likes==null?null:e.likes.length)>0?e==null||e.likes==null?null:e.likes.length:""," Like"),a(5),b("",(e==null||e.comments==null?null:e.comments.length)>0?e==null||e.comments==null?null:e.comments.length:""," Comment")}}function mt(t,i){if(t&1&&(n(0,"div",104)(1,"span",105),c(2,"view more comments"),r()()),t&2){let e=m(2).$implicit;a(),F("routerLink","/app/feeds/",e.slug,"")}}function ct(t,i){if(t&1){let e=g();n(0,"small",106),f("click",function(){u(e);let l=m(2).$implicit,p=m();return _(p.reply(l.comments[0]))}),n(1,"mat-icon"),c(2,"reply"),r(),c(3," Reply "),r()}}function pt(t,i){if(t&1){let e=g();n(0,"small",106),f("click",function(){u(e);let l=m(3);return _(l.loginForm())}),n(1,"mat-icon"),c(2,"reply"),r(),c(3," Reply "),r()}}function dt(t,i){if(t&1&&(V(0),n(1,"div",109)(2,"div")(3,"div",110)(4,"div"),v(5,"img",95),r(),n(6,"div")(7,"div",96),c(8),S(9,"titlecase"),r(),n(10,"div",97),c(11),r()()(),n(12,"small",98),c(13),r()()(),U()),t&2){let e=m().$implicit,o=m(4);a(5),h("src",e==null||e.users==null?null:e.users.image,y),h("alt",e==null||e.users==null?null:e.users.display),a(3),C(I(9,5,e==null||e.users==null?null:e.users.display)),a(3),C(e.content),a(2),C(o.timeAlgo(e.timestamp))}}function ut(t,i){if(t&1&&(n(0,"li"),d(1,dt,14,7,"ng-container",46),r()),t&2){let e=i.$implicit,o=i.index,l=m(4);R("p-2 nav-item ",o==0?"":"border-top",""),a(),s("ngIf",e.status=="Active"||e.user==(l.loginUser==null?null:l.loginUser.id))}}function _t(t,i){t&1&&(n(0,"li")(1,"div",111),c(2,"No replies..."),r()())}function ft(t,i){if(t&1&&(n(0,"ul",107),d(1,ut,2,4,"li",108)(2,_t,3,0,"li",46),r()),t&2){let e=m(2).$implicit;a(),s("ngForOf",e.comments[0]==null?null:e.comments[0].replies),a(),s("ngIf",(e.comments[0]==null||e.comments[0].replies==null?null:e.comments[0].replies.length)==0||!(e.comments[0]!=null&&e.comments[0].replies))}}function vt(t,i){if(t&1){let e=g();n(0,"button",120),f("click",function(){u(e);let l=m(4);return _(l.cancelReply("feed"))}),c(1," Cancel "),r()}}function gt(t,i){if(t&1&&(n(0,"button",121),c(1," Reply "),r()),t&2){let e=m(3).$implicit;s("disabled",!e.userReply)}}function xt(t,i){if(t&1){let e=g();n(0,"button",122),f("click",function(){u(e);let l=m(4);return _(l.loginForm())}),c(1," Reply "),r()}if(t&2){let e=m(3).$implicit;s("disabled",!e.userReply)}}function yt(t,i){if(t&1){let e=g();n(0,"form",112),f("ngSubmit",function(){u(e);let l=m(2).$implicit,p=m();return _(p.postComment(l.comments[0],l))}),n(1,"div",113),c(2),S(3,"titlecase"),r(),n(4,"div",114)(5,"div",115)(6,"mat-form-field",116)(7,"textarea",117),z("ngModelChange",function(l){u(e);let p=m(2).$implicit;return B(p.userReply,l)||(p.userReply=l),_(l)}),r()()(),n(8,"div",118),d(9,vt,2,0,"button",119)(10,gt,2,1,"button",59)(11,xt,2,1,"button",60),r()()()}if(t&2){let e=m(2).$implicit,o=m();a(2),b(" Reply to ",I(3,5,e.comments[0]==null||e.comments[0].users==null?null:e.comments[0].users.display)," "),a(5),$("ngModel",e.userReply),a(2),s("ngIf",o.loginUser),a(),s("ngIf",o.loginUser),a(),s("ngIf",!o.loginUser)}}function ht(t,i){if(t&1){let e=g();n(0,"div",123)(1,"span",124),f("click",function(){u(e);let l=m(2).$implicit,p=m();return _(p.viewReply(l.comments[0]))}),c(2),r()()}if(t&2){let e=m(2).$implicit,o=m();a(2),b(" ",(e.comments[0]==null?null:e.comments[0].id)==(o.showReply==null?null:o.showReply.id)?"Hide replies":(e.comments[0]==null||e.comments[0].replies==null?null:e.comments[0].replies.length)>1?"View all "+(e.comments[0]==null||e.comments[0].replies==null?null:e.comments[0].replies.length)+" replies":"View reply"," ")}}function Ct(t,i){if(t&1&&(n(0,"div"),d(1,mt,3,2,"div",90),n(2,"div",91)(3,"ul",92)(4,"li"),V(5),n(6,"div",93)(7,"div",5)(8,"div",94)(9,"div"),v(10,"img",95),r(),n(11,"div")(12,"div",96),c(13),S(14,"titlecase"),r(),n(15,"div",97),c(16),r()()(),n(17,"div",78)(18,"small",98),c(19),r(),d(20,ct,4,0,"small",99)(21,pt,4,0,"small",99),r()()(),d(22,ft,3,2,"ul",100)(23,yt,12,7,"form",101),n(24,"div",102),d(25,ht,3,1,"div",103),r(),U(),r()()()()),t&2){let e=m().$implicit,o=m();a(),s("ngIf",(e==null||e.comments==null?null:e.comments.length)>1),a(9),h("src",e.comments[0]==null||e.comments[0].users==null?null:e.comments[0].users.image,y),h("alt",e.comments[0]==null||e.comments[0].users==null?null:e.comments[0].users.display),a(3),C(I(14,11,e.comments[0]==null||e.comments[0].users==null?null:e.comments[0].users.display)),a(3),C(e.comments[0]==null?null:e.comments[0].content),a(3),C(o.timeAlgo(e.comments[0]==null?null:e.comments[0].timestamp)),a(),s("ngIf",o.loginUser&&(e.comments[0]==null?null:e.comments[0].id)!==(o.replyTo==null?null:o.replyTo.id)),a(),s("ngIf",!o.loginUser),a(),s("ngIf",(e.comments[0]==null?null:e.comments[0].id)==(o.showReply==null?null:o.showReply.id)),a(),s("ngIf",o.loginUser&&(e.comments[0]==null?null:e.comments[0].id)==(o.replyTo==null?null:o.replyTo.id)),a(2),s("ngIf",(e.comments[0]==null||e.comments[0].replies==null?null:e.comments[0].replies.length)>0)}}function bt(t,i){if(t&1&&(n(0,"button",121),c(1," Comment "),r()),t&2){let e=m().$implicit;s("disabled",!e.userComment)}}function St(t,i){if(t&1){let e=g();n(0,"button",122),f("click",function(){u(e);let l=m(2);return _(l.loginForm())}),c(1," Comment "),r()}if(t&2){let e=m().$implicit;s("disabled",!e.userComment)}}function wt(t,i){if(t&1){let e=g();n(0,"div",32)(1,"mat-card",33)(2,"div",34)(3,"div",35)(4,"div",36),d(5,Oe,1,2,"img",37)(6,qe,1,2,"img",38),r(),n(7,"div"),d(8,We,2,2,"div",39)(9,Ge,3,4,"div",39),n(10,"small"),c(11),r()()(),d(12,Ze,4,1,"div",40),n(13,"mat-menu",null,0)(15,"button",41)(16,"mat-icon",42),c(17,"visibility"),r(),n(18,"span"),c(19,"Detail"),r()(),d(20,Je,5,0,"button",43)(21,Ke,5,0,"button",43),r()(),d(22,Qe,3,7,"div",44)(23,Xe,2,2,"div",45)(24,it,2,1,"div",46),n(25,"div",47),d(26,ot,11,6,"div",48)(27,st,11,4,"div",48),n(28,"div",49)(29,"button",50),f("click",function(){let l=u(e).$implicit,p=m();return _(p.shareDialog(l))}),n(30,"mat-icon",51),c(31,"share"),r(),n(32,"span",52),c(33," Share"),r()()()(),d(34,Ct,26,13,"div",46),n(35,"div",53)(36,"div",23),v(37,"img",54),r(),n(38,"div",25)(39,"form",55),f("ngSubmit",function(){let l=u(e).$implicit,p=m();return _(p.postComment(null,l))}),n(40,"mat-form-field",56)(41,"textarea",57),z("ngModelChange",function(l){let p=u(e).$implicit;return B(p.userComment,l)||(p.userComment=l),_(l)}),r()(),n(42,"div",58),d(43,bt,2,1,"button",59)(44,St,2,1,"button",60),r()()()()()()}if(t&2){let e,o,l=i.$implicit,p=m();a(5),s("ngIf",l==null?null:l.companies),a(),s("ngIf",!(l!=null&&l.companies)),a(2),s("ngIf",l==null?null:l.companies),a(),s("ngIf",!(l!=null&&l.companies)),a(2),C(p.timeAlgo(l.timestamp)),a(),s("ngIf",p.loginUser),a(3),F("routerLink","/app/feeds/",l.slug,""),a(5),s("ngIf",(p.loginUser==null?null:p.loginUser.id)==(l==null?null:l.author)||(p.selectedCompany==null||p.selectedCompany.me==null?null:p.selectedCompany.me.user)=="staff user"),a(),s("ngIf",(p.loginUser==null?null:p.loginUser.id)==(l==null?null:l.author)||(p.selectedCompany==null||p.selectedCompany.me==null?null:p.selectedCompany.me.user)=="staff user"),a(),s("ngIf",l.content),a(),s("ngIf",p.imageType.includes(l==null||l.file==null||(e=l.file.split("."))==null||(e=e.pop())==null?null:e.toLowerCase())),a(),s("ngIf",!p.imageType.includes(l==null||l.file==null||(o=l.file.split("."))==null||(o=o.pop())==null?null:o.toLowerCase())),a(2),s("ngIf",p.loginUser),a(),s("ngIf",!p.loginUser),a(7),s("ngIf",(l==null||l.comments==null?null:l.comments.length)>0),a(3),s("src",p.loginUser==null?null:p.loginUser.image,y),a(4),$("ngModel",l.userComment),a(2),s("ngIf",p.loginUser),a(),s("ngIf",!p.loginUser)}}function kt(t,i){if(t&1){let e=g();n(0,"div",125)(1,"button",126),f("click",function(){u(e);let l=m();return _(l.loadBlog())}),n(2,"mat-icon"),c(3,"keyboard_double_arrow_down"),r(),c(4,"Load More "),r()()}}function It(t,i){t&1&&v(0,"app-skeleton",20),t&2&&s("items",2)("layout",12)}function Ft(t,i){if(t&1){let e=g();n(0,"div",134)(1,"div",22),v(2,"img",135),n(3,"div",136)(4,"a",137),c(5),S(6,"titlecase"),r()()(),n(7,"div",138)(8,"button",139),f("click",function(){let l=u(e),p=l.$implicit,w=l.index,k=m(4);return _(k.acceptConnection(p,w,!0))}),n(9,"mat-icon",140),c(10,"check"),r()(),n(11,"button",141),f("click",function(){let l=u(e),p=l.$implicit,w=l.index,k=m(4);return _(k.acceptConnection(p,w,!1))}),n(12,"mat-icon",140),c(13,"cancel"),r()()()()}if(t&2){let e=i.$implicit;a(2),h("src",e==null||e.users==null?null:e.users.image,y),h("alt",e==null||e.users==null?null:e.users.display),a(2),F("routerLink","/professional/",e==null||e.users==null?null:e.users.username,""),a(),C(I(6,5,e==null||e.users==null?null:e.users.display))}}function Tt(t,i){if(t&1&&(V(0),d(1,Ft,14,7,"div",133),U()),t&2){let e=m(3);a(),s("ngForOf",e.connectionRequest)}}function Et(t,i){t&1&&(n(0,"div")(1,"h4",142),c(2," No Connections Found "),r()())}function Vt(t,i){if(t&1&&(n(0,"mat-card",129)(1,"div")(2,"div",130)(3,"span",131),c(4,"Connection Requests"),r(),n(5,"a",132),c(6,"See All"),r()(),d(7,Tt,2,1,"ng-container",46)(8,Et,3,0,"div",46),r()()),t&2){let e=m(2);a(7),s("ngIf",e.connectionRequest.length>0),a(),s("ngIf",e.connectionRequest.length==0)}}function Ut(t,i){if(t&1){let e=g();n(0,"div",146)(1,"div",22),v(2,"img",135),n(3,"div",5)(4,"a",147),c(5),S(6,"titlecase"),r()()(),n(7,"div",148)(8,"button",149),f("click",function(){let l=u(e).$implicit,p=m(4);return _(p.userChat(p.loginUser.id,l.users.id,l==null?null:l.channel))}),n(9,"mat-icon",150),c(10,"chat"),r()()()()}if(t&2){let e=i.$implicit;a(2),h("src",e==null||e.users==null?null:e.users.image,y),h("alt",e==null||e.users==null?null:e.users.display),a(2),F("routerLink","/professional/",e==null||e.users==null?null:e.users.username,""),a(),C(I(6,7,e==null||e.users==null?null:e.users.display)),a(4),F("matTooltip","Chat with ",e==null||e.users==null?null:e.users.display,"")}}function Mt(t,i){if(t&1&&(V(0),d(1,Ut,11,9,"div",145),U()),t&2){let e=m(3);a(),s("ngForOf",e.myConnection)}}function Lt(t,i){t&1&&(n(0,"div")(1,"h4",142),c(2," No Connections Found "),r()())}function Rt(t,i){if(t&1&&(n(0,"mat-card",129)(1,"div",143)(2,"span",131),c(3,"My Connections"),r(),n(4,"a",144),c(5,"See All"),r()(),d(6,Mt,2,1,"ng-container",46)(7,Lt,3,0,"div",46),r()),t&2){let e=m(2);a(6),s("ngIf",e.myConnection.length>0),a(),s("ngIf",e.myConnection.length==0)}}function Pt(t,i){if(t&1&&(n(0,"div",127),d(1,It,1,2,"app-skeleton",8)(2,Vt,9,2,"mat-card",128)(3,Rt,8,2,"mat-card",128),r()),t&2){let e=m();a(),s("ngIf",e.loading),a(),s("ngIf",!e.loading),a(),s("ngIf",!e.loading)}}var M=class t{constructor(i,e,o,l,p,w,k,Dt,jt,$t,Bt){this.route=i;this.location=e;this.meta=o;this.router=l;this.title=p;this.dialog=w;this.auth=k;this.fb=Dt;this._snackBar=jt;this.schemaDataService=$t;this.safePipe=Bt;this.selectedCompany=this.auth.currentCompanyValue?.id?this.auth.currentCompanyValue:null,this.currentUrl=this.auth.document.location.origin,e.path().includes("app/feeds/")&&(this.title.setTitle("Feeds | Security Troops"),this.schemaDataService.generateJsonLdScripts("blog data","postList")),e.path().includes("app/feeds/hashtag")&&this.route.params.pipe().subscribe(D=>{this.feedHash=D.hash}),this.meta.addTags([{keyword:"Bodyguard, Bouncer, Home Guard, Gunman, Watchman, Valet, Field Officer, Supervisor, Housekeeping"},{description:"We provide all kind of Security Services like Bodyguard, Bouncer, Home Guard, Gunman, Watchman, Valet, Field Officer, Supervisor, Housekeeping"}]),this.loginUser=k.userValue.id?k.userValue:null,this.userPlusCompanies=k.companiesList.filter(D=>D?.me?.feed==!0),this.userPlusCompanies.length>0&&(this.userPlusCompanies.unshift(this.loginUser),this.feedCompany=this.loginUser)}page=1;loginUser;tableData=[];dataSource=new oe(this.tableData);posts=[];postsData={};postTitle;filterDictionary=new Map;showReply=null;replyTo=null;currentUrl;imageType=["jpg","jpeg","png","gif","bmp","avif"];selectedCompany;connectionRequest=[];myConnection=[];professional=null;companyFeebs=null;loading=!1;userPlusCompanies=[];feedCompany;nextUrl="";feedHash;ngOnDestroy(){this.title.setTitle("Security Troops"),this.schemaDataService.removeScript()}ngOnInit(){!this.professional&&!this.companyFeebs&&(this.getMyConnection(),this.getConnectionReq()),this.dataSource.filterPredicate=function(i,e){var o=new Map(JSON.parse(e));let l=!1;for(let[p,w]of o)if(l=w=="All"||i[p]==w,!l)return!1;return l},this.blog()}selectionChange(i){this.feedCompany=i?.value}blog(i=""){let e={};this.feedHash&&(e.hashtag__title=this.feedHash),i||(this.professional&&(e.author=this.professional.id,e.limit=10),this.companyFeebs&&(e.company=this.companyFeebs.id,e.limit=10)),this.loading=!0;let o="feeds/post/";(this.companyFeebs||!this.loginUser?.id)&&(o="feeds/details/"),this.auth.getAPI(i||o,e,!!i).subscribe({next:l=>{this.nextUrl?this.posts=[...this.posts,...l.results]:this.posts=l.results,this.dataSource.data=this.posts,this.loading=!1,this.nextUrl=l.next},error:l=>{this.loading=!1}})}loadBlog(){this.nextUrl&&this.blog(this.nextUrl)}getMyConnection(){let i={};i.limit=5,i.accepted=!0,i.rejected=!1,i.block=!1,i.status="Active",this.auth.getAPI("connection/",i).subscribe(e=>{this.myConnection=e.results})}getConnectionReq(){let i={};i.limit=5,i.accepted=!1,i.status="Active",i.rejected=!1,i.block=!1,i.receiver=this.loginUser.id,this.auth.getAPI("connection/",i).subscribe(e=>{this.connectionRequest=e.results})}blogFilter(i){this.filterDictionary.set("label",i.value);var e=JSON.stringify(Array.from(this.filterDictionary.entries()));this.dataSource.filter=e}searchFilter(){this.postTitle!==""?this.posts=this.posts.filter(i=>i.title.toLowerCase().match(this.postTitle.toLowerCase())):this.postTitle===""&&this.blog()}timeAlgo(i){return this.auth.timeAlgorithm(i)}viewReply(i){i.id==this.showReply?.id?this.showReply=null:this.showReply=H.cloneDeep(i)}reply(i){this.replyTo=H.cloneDeep(i)}cancelReply(i){this.replyTo=null,i.userReply=""}postComment(i=null,e){let o;i?o={parent:i.id,post:e.id,user:this.loginUser.id,content:e.userReply}:o={parent:null,post:e.id,user:this.loginUser.id,content:e.userComment},this.auth.postAPI("feeds/comment/",o).subscribe(l=>{i?(this.replyTo=null,e.userReply="",e?.comments?.find(p=>p.id==i?.id)?.replies?.unshift(l)):(e.userComment="",e?.comments?.unshift(l))})}likePost(i){if(i.likes.includes(this.loginUser?.id)){let e=i?.likes.indexOf(this.loginUser?.id);e>-1&&i?.likes.splice(e,1),this.auth.putAPI("feeds/likes/"+i.id+"/",{likes:i?.likes}).subscribe(o=>{})}else if(this.loginUser){i?.likes.push(this.loginUser?.id);let e=i?.likes;this.auth.putAPI("feeds/likes/"+i.id+"/",{likes:e}).subscribe(o=>{})}}shareDialog(i){let e=this.dialog.open(re,{width:"35%",panelClass:"custom-popup",data:{url:this.currentUrl+"/feed/"+i?.slug,title:i?.content,page:"Feed"}})}feedPost(i){}deleteDialog(i,e){}acceptConnection(i=null,e=null,o=null){}userChat(i,e,o){if(o)this.auth.getAPI(`jabber/channel/${o}/`).subscribe(l=>{this.openMsg(l)});else{let l={content:"",archive:!1,admin:!1,individual:!0};l.individual=!0,l.owner=i,l.company=this.selectedCompany.id,l.collaborators=JSON.stringify([e,i]),i!=e?l.title=e+"-"+i:l.title=this.loginUser.first_name,this.auth.postAPI("jabber/channel/",l).subscribe(p=>{this.openMsg(p)},p=>{this._snackBar.open("Error while creating channel ","",{duration:5e3,panelClass:["snackbar_danger"]})})}}openMsg(i){}loginForm(){this.dialog.open(ae,{panelClass:"custom-popup",width:"35%",data:{title:"See more on Security Troops"}}).afterClosed().subscribe(e=>{e&&(this.loginUser=e)})}static \u0275fac=function(e){return new(e||t)(x(ie),x(Z),x(Y),x(ne),x(ee),x(xe),x(Ve),x(_e),x(ye),x(Ue),x(T))};static \u0275cmp=L({type:t,selectors:[["app-feeds"]],inputs:{professional:"professional",companyFeebs:"companyFeebs"},decls:15,vars:14,consts:[["menu","matMenu"],[1,"Postdetails"],["class","postHeader d-md-none d-block",4,"ngIf"],[1,"post-card","mx-0"],[1,"feeb-content","post-item"],[1,""],["class","postHeader d-md-block d-none",4,"ngIf"],[1,"row","mx-0","position-relative","switch-position"],[3,"items","layout",4,"ngIf"],["class","rounded p-2 mb-2 mx-md-0 ",4,"ngIf"],["class","No_Data",4,"ngIf"],["class","mb-3",4,"ngFor","ngForOf"],["class","Load-more d-flex pt-2",4,"ngIf"],["class","col-md-4 ps-md-2 px-0 position-sticky",4,"ngIf"],[1,"postHeader","d-md-none","d-block"],[1,"pb-4","px-1"],[1,"text-center","mb-1"],[1,"text-center"],[1,"postHeader","d-md-block","d-none"],[1,"pb-4"],[3,"items","layout"],[1,"rounded","p-2","mb-2","mx-md-0"],[1,"d-flex","align-items-center"],[1,"pe-2"],["loading","lazy","width","40px","height","40px","alt","user image","onerror","this.src='../assets/images/st.png'",1,"user-img",3,"src"],[1,"w-100"],["role","button",1,"border","rounded","p-2",3,"click"],[1,"p-2","d-flex","justify-content-center","border-top","mt-2"],["role","button",1,"d-flex","align-items-center",3,"click"],[1,"ps-2"],[1,"No_Data"],["loading","lazy","src","assets/images/no_projects.png","alt","data not found",1,"w-100"],[1,"mb-3"],[1,"example-card","w-100","h-100","p-md-3","p-2","mx-md-0","rounded"],[1,"row","mx-0","pb-2"],[1,"col-10","d-flex","px-0"],[1,"pe-2","d-flex","align-items-center"],["loading","lazy","role","button","class","user-img","width","50px","height","50px","alt","company logo","onerror","this.src='../assets/images/st.png'",3,"routerLink","src",4,"ngIf"],["loading","lazy","role","button","class","user-img","width","50px","height","50px","alt","user image","onerror","this.src='../assets/images/st.png'",3,"routerLink","src",4,"ngIf"],["class","mb-0 text-dark h4 text-break","role","button",3,"routerLink",4,"ngIf"],["class","col-2 px-0 d-flex justify-content-end align-items-center",4,"ngIf"],["mat-menu-item","",3,"routerLink"],["matTooltip","View",1,"z-3"],["mat-menu-item","",3,"click",4,"ngIf"],["class"," p-2",4,"ngIf"],["class"," d-flex justify-content-center  position-relative ",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-between","border-bottom","py-2","feed-action"],["class","d-flex",4,"ngIf"],[1,"w-50","d-flex","align-items-center","justify-content-end"],["mat-stroked-button","",1,"st-button",3,"click"],["role","button",1,"blue","m-1"],[1,"d-md-block","d-none"],[1,"d-flex","w-100","mx-0","pt-2"],["loading","lazy","width","35px","height","35px","alt","user profile ","onerror","this.src='../assets/images/st.png'",1,"user-img",3,"src"],[1,"",3,"ngSubmit"],["appearance","outline",1,"w-100","st-input","st-mat-ff","pb-2"],["matInput","","placeholder","Write a comment...",1,"mb-2",3,"ngModelChange","ngModel"],[1,"col-12","text-end","py-2","px-0"],["mat-button","","type","submit","mat-raised-button","","color","primary",3,"disabled",4,"ngIf"],["mat-button","","type","button","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["loading","lazy","role","button","width","50px","height","50px","alt","company logo","onerror","this.src='../assets/images/st.png'",1,"user-img",3,"routerLink","src"],["loading","lazy","role","button","width","50px","height","50px","alt","user image","onerror","this.src='../assets/images/st.png'",1,"user-img",3,"routerLink","src"],["role","button",1,"mb-0","text-dark","h4","text-break",3,"routerLink"],[1,"col-2","px-0","d-flex","justify-content-end","align-items-center"],["mat-icon-button","","aria-label","Example icon-button with a menu",1,"pcard-ic",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"p-2"],[1,"mb-1","fs-6","lh-sm","text-justify","text-break",3,"matTooltipPosition","matTooltip","innerHtml"],[1,"d-flex","justify-content-center","position-relative"],["loading","lazy",1,"card-img-top","w-100","rounded-3",3,"src","alt"],["class","w-100 text-center",4,"ngIf"],[1,"w-100","text-center"],["class","video-content","controls","","name","media",4,"ngIf"],["class","embed-content","controls","controls","width","100%",3,"src",4,"ngIf"],["controls","","name","media",1,"video-content"],[3,"src"],["controls","controls","width","100%",1,"embed-content",3,"src"],[1,"d-flex"],["role","button",1,"d-flex","align-items-center","st-border","rounded","me-2","px-2",3,"click"],["matTooltip","Like","class","me-1","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","var(--primary-color)",4,"ngIf"],["matTooltip","Like","class","me-1 text-aqua-blue1",4,"ngIf"],[1,"text-aqua-blue1","d-md-block","d-none"],["role","button",1,"d-flex","align-items-center","st-border","rounded","px-2",3,"routerLink"],["matTooltip","Comment","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","var(--primary-color)",1,"me-1"],["d","M240-400h480v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM880-80 720-240H160q-33 0-56.5-23.5T80-320v-480q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v720ZM160-320h594l46 45v-525H160v480Zm0 0v-480 480Z"],["matTooltip","Like","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","var(--primary-color)",1,"me-1"],["d","M720-120H280v-520l280-280 50 50q7 7 11.5 19t4.5 23v14l-44 174h258q32 0 56 24t24 56v80q0 7-2 15t-4 15L794-168q-9 20-30 34t-44 14Zm-360-80h360l120-280v-80H480l54-220-174 174v406Zm0-406v406-406Zm-80-34v80H160v360h120v80H80v-520h200Z"],["matTooltip","Like",1,"me-1","text-aqua-blue1"],["role","button",1,"d-flex","align-items-center","st-border","rounded","px-2",3,"click"],["class","fw-bold text-secondary   pt-2",4,"ngIf"],[1,"pt-2"],[1,"nav","flex-column","w-100"],[1,"w-100","mb-2","d-flex","justify-content-start"],[1,"data-card","d-flex","p-2","pe-3","rounded"],["loading","lazy","onerror","this.src='../assets/images/st.png'",1,"comment-user-img",3,"src","alt"],[1,"mb-0","text-dark"],[1,"text-secondary","content-text","text-break"],[1,"text-muted","pe-2"],["role","button","class","text-info reply-link link",3,"click",4,"ngIf"],["class","nav flex-column  reply-card rounded-3 mb-2 w-100 ms-3",4,"ngIf"],["class"," ms-3 mt-2 p-3 reply-card-form  rounded-3",3,"ngSubmit",4,"ngIf"],[1,"w-100","d-flex","ms-3"],["class","py-2",4,"ngIf"],[1,"fw-bold","text-secondary","pt-2"],["role","button",3,"routerLink"],["role","button",1,"text-info","reply-link","link",3,"click"],[1,"nav","flex-column","reply-card","rounded-3","mb-2","w-100","ms-3"],[3,"class",4,"ngFor","ngForOf"],[1,"w-100","d-flex","justify-content-start"],[1,"d-flex","data-card","rounded","p-2","pe-3"],[1,"mb-0","p-2","text-muted","h5"],[1,"ms-3","mt-2","p-3","reply-card-form","rounded-3",3,"ngSubmit"],[1,"h6"],[1,"mx-0"],[1,"col-12","px-0"],["appearance","outline",1,"w-100","st-input","st-mat-ff"],["matInput","","placeholder","Write a reply...",1,"mb-2",3,"ngModelChange","ngModel"],[1,"col-12","text-end","pt-2","px-0"],["class","me-3","mat-button","","type","button","mat-raised-button","","color","basic",3,"click",4,"ngIf"],["mat-button","","type","button","mat-raised-button","","color","basic",1,"me-3",3,"click"],["mat-button","","type","submit","mat-raised-button","","color","primary",3,"disabled"],["mat-button","","type","button","mat-raised-button","","color","primary",3,"click","disabled"],[1,"py-2"],["role","button",1,"link","text-info","fw-bold",3,"click"],[1,"Load-more","d-flex","pt-2"],["mat-button","",1,"mx-auto",3,"click"],[1,"col-md-4","ps-md-2","px-0","position-sticky"],["class","mb-2  rounded",4,"ngIf"],[1,"mb-2","rounded"],[1,"rounded-top","p-2","d-flex","justify-content-between","lrgradient","align-items-center"],[1,"st_white","fs-5","title"],["routerLink","/app/connection-request",1,"text-decoration-none","st_white"],["class","mb-2 p-2 d-flex w-100  justify-content-between ",4,"ngFor","ngForOf"],[1,"mb-2","p-2","d-flex","w-100","justify-content-between"],["onerror","this.src='../assets/images/st.png'",1,"avatar","me-2",3,"src","alt"],[1,"fw-semibold"],[1,"text-decoration-none","text-dark",3,"routerLink"],[1,"form-actions","d-flex"],["matTooltip","Accept Connection","matTooltipPosition","before","mat-mini-fab","","color","primary",1,"edit-btn","mx-1",3,"click"],["aria-hidden","false"],["matTooltip","Reject Connection","matTooltipPosition","before","mat-mini-fab","","color","warn",1,"delete-btn",3,"click"],[1,"mb-0","p-3","fw-semibold","text-black-50"],[1,"p-2","rounded-top","d-flex","justify-content-between","lrgradient","align-items-center"],["routerLink","/app/connection",1,"text-decoration-none","st_white"],["class","p-2 pb-3 d-flex w-100 align-items-center justify-content-between",4,"ngFor","ngForOf"],[1,"p-2","pb-3","d-flex","w-100","align-items-center","justify-content-between"],[1,"text-decoration-none","text-dark","fw-semibold",3,"routerLink"],[1,"form-actions","text-end"],["mat-mini-fab","","color","primary",1,"edit-btn",3,"click"],[1,"z-3",3,"matTooltip"]],template:function(e,o){e&1&&(n(0,"div")(1,"div",1),d(2,Be,6,0,"div",2),n(3,"div",3)(4,"div",4)(5,"div",5),d(6,ze,6,0,"div",6),n(7,"div",7)(8,"div"),d(9,Ae,1,2,"app-skeleton",8)(10,He,14,2,"mat-card",9)(11,Ne,4,0,"div",10)(12,wt,45,20,"div",11)(13,kt,5,0,"div",12),r(),d(14,Pt,4,3,"div",13),r()()()()()()),e&2&&(R("feed-list postlist ",o.professional||o.companyFeebs?"":"p-md-4 p-2",""),a(2),s("ngIf",!o.professional&&!o.companyFeebs),a(4),s("ngIf",!o.professional&&!o.companyFeebs),a(2),R("",o.professional||o.companyFeebs?"col-12":"col-md-8 pe-md-2","  px-0"),a(),s("ngIf",o.loading),a(),s("ngIf",!o.professional&&!o.companyFeebs),a(),s("ngIf",(o.dataSource.filteredData==null?null:o.dataSource.filteredData.length)==0&&!o.loading),a(),s("ngForOf",o.dataSource.filteredData),a(),s("ngIf",o.nextUrl),a(),s("ngIf",!o.professional&&!o.companyFeebs))},dependencies:[Te,J,K,ue,se,me,ce,de,pe,fe,ge,ve,he,ke,we,Ie,Ce,Se,be,le,Fe,X,Q,Ee,T],encapsulation:2})};var P=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=L({type:t,selectors:[["app-feed"]],decls:2,vars:0,template:function(e,o){e&1&&(n(0,"p"),c(1,"feed works!"),r())},encapsulation:2})};var ci=[{path:"feeds/hashtag/:hash",component:M},{path:"feeds:slug",component:P},{path:"feeds",component:M}];export{ci as routes};
